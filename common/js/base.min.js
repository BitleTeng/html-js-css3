!function(e){"use strict";var t=document,n="querySelectorAll",i="getElementsByClassName",o=function(e){return t[n](e)},a={type:0,shade:!0,shadeClose:!0,fixed:!0,anim:"scale"},s={extend:function(e){var t=JSON.parse(JSON.stringify(a));for(var n in e)t[n]=e[n];return t},timer:{},end:{}};s.touch=function(e,t){e.addEventListener("click",function(e){t.call(this,e)},!1)};var r=0,d=["layui-m-layer"],l=function(e){var t=this;t.config=s.extend(e),t.view()};l.prototype.view=function(){var e=this,n=e.config,a=t.createElement("div");e.id=a.id=d[0]+r,a.setAttribute("class",d[0]+" "+d[0]+(n.type||0)),a.setAttribute("index",r);var s=function(){var e="object"==typeof n.title;return n.title?'<h3 style="'+(e?n.title[1]:"")+'">'+(e?n.title[0]:n.title)+"</h3>":""}(),l=function(){"string"==typeof n.btn&&(n.btn=[n.btn]);var e,t=(n.btn||[]).length;return 0!==t&&n.btn?(e='<span yes type="1">'+n.btn[0]+"</span>",2===t&&(e='<span no type="0">'+n.btn[1]+"</span>"+e),'<div class="layui-m-layerbtn">'+e+"</div>"):""}();if(n.fixed||(n.top=n.hasOwnProperty("top")?n.top:100,n.style=n.style||"",n.style+=" top:"+(t.body.scrollTop+n.top)+"px"),2===n.type&&(n.content='<i></i><i class="layui-m-layerload"></i><i></i><p>'+(n.content||"")+"</p>"),n.skin&&(n.anim="up"),"msg"===n.skin&&(n.shade=!1),a.innerHTML=(n.shade?"<div "+("string"==typeof n.shade?'style="'+n.shade+'"':"")+' class="layui-m-layershade"></div>':"")+'<div class="layui-m-layermain" '+(n.fixed?"":'style="position:static;"')+'><div class="layui-m-layersection"><div class="layui-m-layerchild '+(n.skin?"layui-m-layer-"+n.skin+" ":"")+(n.className?n.className:"")+" "+(n.anim?"layui-m-anim-"+n.anim:"")+'" '+(n.style?'style="'+n.style+'"':"")+">"+s+'<div class="layui-m-layercont">'+n.content+"</div>"+l+"</div></div></div>",!n.type||2===n.type){var p=t[i](d[0]+n.type),c=p.length;c>=1&&layer.close(p[0].getAttribute("index"))}document.body.appendChild(a);var u=e.elem=o("#"+e.id)[0];n.success&&n.success(u),e.index=r++,e.action(n,u)},l.prototype.action=function(e,t){var n=this;e.time&&(s.timer[n.index]=setTimeout(function(){layer.close(n.index)},1e3*e.time));var o=function(){var t=this.getAttribute("type");0==t?(e.no&&e.no(),layer.close(n.index)):e.yes?e.yes(n.index):layer.close(n.index)};if(e.btn)for(var a=t[i]("layui-m-layerbtn")[0].children,r=a.length,d=0;d<r;d++)s.touch(a[d],o);if(e.shade&&e.shadeClose){var l=t[i]("layui-m-layershade")[0];s.touch(l,function(){layer.close(n.index,e.end)})}e.end&&(s.end[n.index]=e.end)},e.layer={v:"2.0",index:r,open:function(e){var t=new l(e||{});return t.index},close:function(e){var n=o("#"+d[0]+e)[0];n&&(n.innerHTML="",t.body.removeChild(n),clearTimeout(s.timer[e]),delete s.timer[e],"function"==typeof s.end[e]&&s.end[e](),delete s.end[e])},closeAll:function(){for(var e=t[i](d[0]),n=0,o=e.length;n<o;n++)layer.close(0|e[0].getAttribute("index"))}},"function"==typeof define?define(function(){return layer}):function(){var e=document.scripts,n=e[e.length-1],i=n.src;i.substring(0,i.lastIndexOf("/")+1),n.getAttribute("merge")||document.head.appendChild(function(){var e=t.createElement("link");return e.href="https://manage.dianliaoapp.com/client/dev/h5_activity/common/css/layer.css",e.type="text/css",e.rel="styleSheet",e.id="layermcss",e}())}()}(window);var calculatSeize=function(){var e=100,t=1,n=(document.getElementById("wrap_total"),document.documentElement),i=n.clientWidth;if(clientHeight=n.clientHeight,i){var o=e*(i*t/750);if(n.style.fontSize=o+"px",!(o-parseFloat(getComputedStyle(n).fontSize)<.01&&o-parseFloat(getComputedStyle(n).fontSize)>-.01)){var a=o/(parseInt(getComputedStyle(n).fontSize)/o);n.style.fontSize=a+"px"}}};if(document.addEventListener){var resizeEvt="orientationchange"in window?"orientationchange":"resize";window.addEventListener(resizeEvt,calculatSeize,!1),document.addEventListener("DOMContentLoaded",calculatSeize,!1),calculatSeize()}var config={wechatInfoCookie:"wxInfo",userInfoCookie:"userInfo",khserver:"http://test-app-h.dianliaoapp.com",server:"http://test-manage.dianliaoapp.com",requestUrl:"/ydlManage/server/index.php",sourceServer:"http://dianliaotools.oss-cn-shenzhen.aliyuncs.com",recruitShareIcon:"http://dianliaotools.oss-cn-shenzhen.aliyuncs.com/common/logo.png",wechatShareUrl:"http://test-manage.dianliaoapp.com/client/dev/wechat/baseApi/wechatApi.php",wechatShareUrlElse:"http://test-manage.dianliaoapp.com/client/dev/wechat/baseApi/wechatApiElse.php",serverStatus:!1,tipMsgTime:null,layerLoadIndex:null,larerCount:0,layerMsg:function(e,t){layer.open({content:e,skin:"msg",time:t})},layerShowBtn:function(e,t,n,i){layer.open({content:e,btn:[n,t],yes:function(e){i(),layer.close(e)}})},layerLoadOpen:function(){0==config.larerCount?(config.layerLoadIndex=layer.open({type:2}),config.larerCount=1):config.larerCount=config.larerCount-0+1},layerLoadClose:function(){config.larerCount=config.larerCount-1,0==config.larerCount?layer.close(config.layerLoadIndex):console.log("只是清除掉了一个加载层")},layerAllClose:function(){layer.closeAll()},setCookie:function(e,t,n){n=n||1;var i=new Date;i.setTime(i.getTime()+24*this.cookieExpire*60*60*1e3),document.cookie=e+"="+encodeURI(t)+";expires="+i.toGMTString()+"; path=/"},getCookie:function(e){if(document.cookie.length>0){var t,n=document.cookie.indexOf(e+"=");if(n!=-1)return n=n+e.length+1,t=document.cookie.indexOf(";",n),t==-1&&(t=document.cookie.length),decodeURI(document.cookie.substring(n,t))}return""},openShare:function(e,t,n,i,o,a){window.sendToApp.share&&window.sendToApp.share(e,t,n,i,o,a)},share:function(e){window.sendToApp?window.sendToApp.openShare(e):window.webkit&&!this.thirdParty().isWechat&&window.webkit.messageHandlers.openShare.postMessage(e)},appOuterShare:function(e){window.sendToApp?window.sendToApp.openImmediateOuterShare(e):window.webkit&&!this.thirdParty().isWechat&&window.webkit.messageHandlers.openImmediateOuterShare.postMessage(e)},appInnerShare:function(e){window.sendToApp?window.sendToApp.openImmediateInnerShare(e):window.webkit&&!this.thirdParty().isWechat&&window.webkit.messageHandlers.openImmediateInnerShare.postMessage(e)},setStorage:function(e,t,n){"string"!=typeof e&&"string"!=typeof t&&alert("存储必须是字符串"),n?localStorage.setItem(e,t):sessionStorage.setItem(e,t)},getStorage:function(e,t){return t?localStorage.getItem(e):sessionStorage.getItem(e)},tipMsg:function(e,t,n,i,o){null!=config.tipMsgTime&&(document.getElementById("tipMsg").style.opacity="0",document.getElementById("tipMsg").style.zIndex="-9999",document.getElementById("tipMsg").style.transition="opacity "+o/1e3+"s ease",document.getElementById("tipMsg").style.webkitTransition="opacity "+o/1e3+"s ease",clearTimeout(config.tipMsgTime),config.tipMsgTime=null),n=n||1500,i=i||1500,o=o||1200,document.getElementById("tipMsg").innerHTML=e,document.getElementById("tipMsg").style.opacity="1",document.getElementById("tipMsg").style.display="block",document.getElementById("tipMsg").style.zIndex="999",document.getElementById("tipMsg").style.transition="opacity "+i/1e3+"s ease",document.getElementById("tipMsg").style.webkitTransition="opacity "+i/1e3+"s ease",config.tipMsgTime=setTimeout(function(){document.getElementById("tipMsg").style.opacity="0",document.getElementById("tipMsg").style.zIndex="-9999",document.getElementById("tipMsg").style.transition="opacity "+o/1e3+"s ease",document.getElementById("tipMsg").style.webkitTransition="opacity "+o/1e3+"s ease",t&&"function"==typeof t&&t()},n)},getReq:function(e){var t=location.search;if(t=t.replace(/amp;/g,""),t.indexOf("?")!=-1){var n=t.substr(1);strs=n.split("&");for(var i=0;i<strs.length;i++)this[strs[i].split("=")[0]]=decodeURI(strs[i].split("=")[1]);return this[e]}return null},appVersion:function(){var e=navigator.userAgent;navigator.appVersion;return{ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1}}(),addEventAppInit:function(e){window.sendToApp||this.thirdParty().isSafari||this.thirdParty().isWechat||this.thirdParty().isQQ||this.thirdParty().isWeibo?new e:this.appVersion.ios?window.addEventListener("appInit",function(){new e},!1):new e},thirdParty:function(){var e=navigator.userAgent.toLowerCase();return{isWechat:"micromessenger"==e.match(/MicroMessenger/i),isQQ:"qq"==e.match(/QQ/i),isWeibo:"weibo"==e.match(/WeiBo/i),isSafari:e.indexOf("safari")>0}},getDateInterval:function(e,t){var n,i;if(e instanceof Date){var o=(e.getFullYear(),e.getMonth()+1),a=e.getDate();o=o>9?o:"0"+o,a=a>9?a:"0"+a,n=e.getFullYear()+"-"+o+"-"+a;var s=e.setDate(e.getDate()-t);s=new Date(s);var r=(s.getFullYear(),s.getMonth()+1),d=s.getDate();r=r>9?r:"0"+r,d=d>9?d:"0"+d,i=s.getFullYear()+"-"+r+"-"+d}return{beforeTime:i,currentlyTime:n}},changeHourMinSecond:function(e){var t=parseInt(e/3600),n=parseInt(e/60%60),i=parseInt(e%60);t=t>9?t:"0"+t,n=n>9?n:"0"+n,i=i>9?i:"0"+i;var o=(t+"").substring(0,1),a=(t+"").substring(1,2),s=(n+"").substring(0,1),r=(n+"").substring(1,2),d=(i+"").substring(0,1),l=(i+"").substring(1,2);return{hourTen:o,hourBit:a,minterTen:s,minterBit:r,secondTen:d,secondBit:l}},callAppGetUid:function(){return window.sendToApp?JSON.parse(window.sendToApp.getUserInfo()).uid:window.webkit&&!this.thirdParty().isWechat?this.getReq("appUid"):"10003"},callAppGetUserInfo:function(){var e;return e="0"==location.href.indexOf("https://manage.dianliaoapp.com")?{uid:"170234",phone:"18676688632",sex:"2",nickname:"Miko\t",chatGold:"300",icon:"http://img.dianliaoapp.com/RELEASE/170234/head/1503905800709.png",isRenewals:1}:{uid:"10075",phone:"18682240624",sex:"2",nickname:"欢迎进来\t",chatGold:"999",icon:"http://img.dianliaoapp.com/DEBUG/10075/head/1517979157265.png",isRenewals:1},window.sendToApp?JSON.parse(window.sendToApp.getUserInfo()):window.webkit&&!this.thirdParty().isWechat?JSON.parse(this.getCookie("USERINFO")):e},callAppToRearge:function(){window.sendToApp?window.sendToApp.openChargePanel():window.webkit&&!this.thirdParty().isWechat?window.webkit.messageHandlers.openChargePanel.postMessage(""):console.log("去app的充值页面进行充值")},callAppToUidIndex:function(e){window.sendToApp?window.sendToApp.openUserInfoPanel(e):window.webkit&&!this.thirdParty().isWechat?window.webkit.messageHandlers.openUserInfoPanel.postMessage(e):console.log("去"+e+"个人详情首页")},callAppToFamilyIndexDetail:function(e){var t=e.toString();window.sendToApp?window.sendToApp.openFamilyInfoPanel(t):window.webkit&&!this.thirdParty().isWechat?window.webkit.messageHandlers.openFamilyInfoPanel.postMessage(t):console.log("打开了"+t+"家族首页面")},callAppToElseUidChat:function(e){window.sendToApp?window.sendToApp.openChatPanel(e):window.webkit&&!this.thirdParty().isWechat?window.webkit.messageHandlers.openChatPanel.postMessage(e):console.log("去与"+e+"的对话IM页面")},callAppOpenElseHtml:function(e,t){var n=this;window.sendToApp?n.appVersion.ios?window.sendToApp.startHTMLView(e):n.appVersion.android&&window.sendToApp.startHTMLView(e,t):window.webkit&&!this.thirdParty().isWechat?n.appVersion.ios&&window.webkit.messageHandlers.startHTMLView.postMessage(e):console.log("打开了title为("+t+")链接为("+e+")页面")},goToAppRecord:function(){return window.sendToApp?!!window.sendToApp.htmlActivityRecord&&(window.sendToApp.htmlActivityRecord(),!0):window.webkit&&!this.thirdParty().isWechat?(window.webkit.messageHandlers.htmlActivityRecord.postMessage(""),!0):void console.log("去App的录音页面")},htmlAppRecordId:function(e){return function(t){var n=config;n.appVersion.ios?""==t.url?e("null"):(t=JSON.stringify(t),e(t)):n.appVersion.android&&(t=JSON.parse(t),"0"==t.count?e("null"):(t=JSON.stringify(t),e(t)))}},callAppToRoomHallData:function(e,t){var n=this,i="";i="0"==location.href.indexOf("https://manage.dianliaoapp.com")?"https://app-h.dianliaoapp.com/HActivity/getFamilyLiveInfo?yun_xin_room_id="+e:"http://test-app-h.dianliaoapp.com/HActivity/getFamilyLiveInfo?yun_xin_room_id="+e;var o="";o="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject,o.open("GET",i,!0),o.send(null),o.onreadystatechange=function(){if(4==o.readyState&&200==o.status){var e=JSON.parse(o.responseText);if("0"==e.room_status){var i={};i.chatId=e.chat_id,i.yunXinRoomId=e.yun_xin_room_id,i.roomLiveBroadcastRecordId=e.call_record_id,i.liveBroadcastType=e.live_broadcast_type,i.familyId=e.family_id,i.roomId=e.room_id,i.isCloase=e.is_close,window.sendToApp?window.sendToApp.openRoomHallPanel&&(t(),window.sendToApp.openRoomHallPanel(JSON.stringify(i))):window.webkit&&!n.thirdParty().isWechat&&(t(),window.webkit.messageHandlers.openRoomHallPanel.postMessage(JSON.stringify(i)))}else"1"==e.room_status?(t(),n.layerMsg("房间已关闭啦~",2)):"2"==e.room_status&&(t(),n.layerMsg("由于该直播间违反了平台相关规定，已被封停。若有疑问可联系qq：3214823723",2))}}},settingRightBtn:function(e){window.sendToApp?window.sendToApp.settingRightBtn(e):window.webkit&&!this.thirdParty().isWechat?window.webkit.messageHandlers.settingRightBtn.postMessage(e):console.log("设置右侧按钮")},closeWebFrame:function(){window.sendToApp?window.sendToApp.closeWebFrame():window.webkit&&!this.thirdParty().isWechat?window.webkit.messageHandlers.closeWebFrame.postMessage(""):console.log("关闭当前页面web控件")},getGoldTickets:function(){window.sendToApp?window.sendToApp.getGoldTickets():window.webkit&&!this.thirdParty().isWechat?window.webkit.messageHandlers.getGoldTickets.postMessage(""):console.log("实现客户端、H5页面聊币、聊票数量的设置")},goOutBrowser:function(e){window.sendToApp?window.sendToApp.goOutBrowser():window.webkit&&!this.thirdParty().isWechat?window.webkit.messageHandlers.goOutBrowser.postMessage(e):console.log("去外部浏览器页面")}};"0"==location.href.indexOf("https://manage.dianliaoapp.com")&&(config.khserver="https://app-h.dianliaoapp.com",config.server="https://manage.dianliaoapp.com",config.wechatShareUrl="https://manage.dianliaoapp.com/client/dev/wechat/baseApi/wechatApi.php",config.serverStatus=!0);