/*
* qq分享的控件
* html文件在qq的配置控件
*/ 
(function(){function e(e,n){var i=document,t=i.head||i.getElementsByTagName("head")[0]||i.documentElement,a=i.createElement("script");a.onload=n,a.onerror=function(){},a.async=!0,a.src=e[0],t.appendChild(a)}function n(e){e.WXconfig&&c([o],function(n){n.config||(n=window.wx);var i=e.WXconfig;n.config({debug:!1,appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareQZone"]}),n.error(function(e){}),n.ready(function(){var t={title:e.title,desc:e.summary,link:e.url,imgUrl:e.pic,type:"",dataUrl:"",success:function(){e.callback&&e.callback()},cancel:function(){}};n.onMenuShareAppMessage(t),n.onMenuShareQQ(t),n.onMenuShareQZone(t),i.swapTitleInWX?n.onMenuShareTimeline({title:e.summary,desc:e.title,link:e.url,imgUrl:e.pic,type:"",dataUrl:"",success:function(){e.callback&&e.callback()},cancel:function(){}}):n.onMenuShareTimeline(t)})})}function i(e){function n(){try{e.callback?window.mqq.ui.setOnShareHandler(function(n){3==n&&(e.swapTitle||e.WXconfig&&e.WXconfig.swapTitleInWX)?i.title=e.summary:i.title=e.title,i.share_type=n,i.back=!0,window.mqq.ui.shareMessage(i,function(n){0===n.retCode&&e.callback&&e.callback.call(this,n)})}):window.mqq.data.setShareInfo(i)}catch(e){}}var i={title:e.title,desc:e.summary,share_url:e.url,image_url:e.pic};window.mqq?n():c([r],function(){n()})}function t(e){function n(){if(QZAppExternal&&QZAppExternal.setShare){for(var n=[],i=[],t=[],a=[],c=0;c<5;c++)n.push(e.pic),a.push(e.url),4===c&&(e.swapTitle||e.WXconfig&&e.WXconfig.swapTitleInWX)?(i.push(e.summary),t.push(e.title)):(i.push(e.title),t.push(e.summary));QZAppExternal.setShare(function(e){},{type:"share",image:n,title:i,summary:t,shareURL:a})}}window.QZAppExternal?n():c([s],function(){n()})}function a(e){var a=navigator.userAgent,c=a.match(/MicroMessenger\/([\d\.]+)/),o=a.match(/QQ\/([\d\.]+)/),r=a.indexOf("Qzone/")!==-1;c&&n(e),o&&i(e),r&&t(e)}var c,o="//res.wx.qq.com/open/js/jweixin-1.0.0.js",r="//open.mobile.qq.com/sdk/qqapi.js?_bid=152",s="//qzonestyle.gtimg.cn/qzone/phone/m/v4/widget/mobile/jsbridge.js?_bid=339";"function"==typeof define&&(define.cmd||define.amd)?(define.cmd?c=seajs.use:define.amd&&(c=window.require),define(function(){return a})):(c=e,window.setShareInfo=a)})();